---
phase: 14-ui-integration
plan: '01'
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/page.tsx
  - src/app/components/RecommendationsGrid.tsx
autonomous: true
requirements: []

must_haves:
  truths:
    - "Main page shows personalized recommendations for authenticated users"
    - "Horizontal scroll displays top 12 recommendations"
    - "Cold start users see trending movies fallback with messaging"
    - "Recommendations are cached and update periodically"
  artifacts:
    - path: "src/app/page.tsx"
      provides: "Main page with recommendations section"
      contains: "recommendations"
    - path: "src/app/components/RecommendationsGrid.tsx"
      provides: "Recommendations horizontal scroll component"
      exports: ["RecommendationsGrid"]
  key_links:
    - from: "src/app/page.tsx"
      to: "/api/recommendations/patterns"
      via: "RecommendationsGrid component"
      pattern: "fetch.*recommendations"
---

<objective>
Integrate personalized recommendations into the main page. Replace the placeholder text with actual recommendations from the API, displayed as a horizontal scroll.
</objective>

<context>
@.planning/ROADMAP.md
@src/app/page.tsx
@src/app/components/HorizontalMovieGridServer.tsx
@src/app/api/recommendations/patterns/route.ts
</context>

<tasks>

<task type="auto">
  <name>Create RecommendationsGrid component</name>
  <files>src/app/components/RecommendationsGrid.tsx</files>
  <action>
    Create a client component for displaying personalized recommendations:
    1. Create `RecommendationsGrid.tsx` as client component ('use client')
    2. Fetch from `/api/recommendations/patterns` on mount using useEffect
    3. Display recommendations in horizontal scroll using ScrollContainer pattern
    4. Handle loading state with MovieCardSkeleton
    5. Handle empty state (no recommendations yet)
    6. Handle cold start: show "Add more movies to get personalized recommendations"
    7. Use MovieCard for each recommendation
    8. Pass recommendation metadata (algorithm, confidence) to MovieCard
  </action>
  <verify>
    - Run `npm run lint` passes
    - Component renders without errors
  </verify>
  <done>
    RecommendationsGrid component displays personalized recommendations
  </done>
</task>

<task type="auto">
  <name>Update main page to include recommendations</name>
  <files>src/app/page.tsx</files>
  <action>
    Update the main page to show personalized recommendations:
    1. Import RecommendationsGrid component
    2. Add a section "Рекомендации для вас" (Recommendations for you) below the trending section
    3. Keep existing trending section unchanged
    4. Wrap in Suspense with LoaderSkeleton for streaming
    
    Note: Keep the existing "Что посмотреть дальше?" section but update to conditionally show recommendations OR fallback message.
  </action>
  <verify>
    - Run `npm run lint` passes
    - Test page loads with and without authenticated user
  </verify>
  <done>
    Main page shows personalized recommendations for logged-in users
  </done>
</task>

</tasks>

<verification>
- Run `npm run lint` - no errors
- Test as authenticated user: see recommendations
- Test as anonymous user: see trending only
- Test as cold start user: see fallback message
</verification>

<success_criteria>
- [ ] Main page shows personalized recommendations for authenticated users
- [ ] Horizontal scroll displays recommendations
- [ ] Cold start users see appropriate messaging
- [ ] Anonymous users see trending only
</success_criteria>

<output>
After completion, create `.planning/phases/14-ui-integration/14-01-SUMMARY.md`
</output>
