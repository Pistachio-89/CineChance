---
phase: 03-lint-cleanup
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - eslint.config.mjs
  - package.json
autonomous: true
requirements: []
must_haves:
  truths:
    - "npm run lint проходит без ошибок (0 errors)"
    - "Код использует типизированные типы вместо any"
    - "Нет неиспользуемых переменных"
    - "Используется logger вместо console.log"
    - "Нет проблем с react-hooks"
  artifacts:
    - path: "eslint.config.mjs"
      provides: "Правила линтера для проекта"
    - path: "package.json"
      provides: "Скрипты для проверки линта"
  key_links:
    - from: "src/**/*.ts"
      to: "eslint"
      via: "npm run lint"
      pattern: "lint check"
---

<objective>
Исправить все 629 ошибок и 171 предупреждение lint в проекте.

Цель: довести `npm run lint` до 0 errors.
</objective>

<context>
@AGENTS.md

# Текущее состояние lint
- 629 errors, 171 warnings
- 12 errors + 1 warning auto-fixable

# Группы проблем
| Категория | Количество |
|-----------|------------|
| @typescript-eslint/no-explicit-any | 209 |
| no-unused-vars + @typescript-eslint/no-unused-vars | 356 |
| no-console | 112 |
| react-hooks/* | 27 |
| @next/next/* | 11 |
| Прочие | 6 |
</context>

<tasks>

<task type="auto">
  <name>Task 1: Автоматическое исправление (--fix)</name>
  <files>[]</files>
  <action>
Запустить `npx eslint --fix` для автоматического исправления доступных ошибок:
- prefer-const (где возможно)
- И другие auto-fixable правила
  </action>
  <verify>`npm run lint 2>&1 | grep -c "fixable"`</verify>
  <done>Auto-fixable ошибки исправлены</done>
</task>

<task type="auto">
  <name>Task 2: Заменить console.log на logger</name>
  <files>[]</files>
  <action>
Для каждого файла с ошибкой no-console:
1. Добавить импорт: import { logger } from '@/lib/logger';
2. Заменить console.log на logger.info/logger.error
3. Удалить неиспользуемые console.* вызовы
  </action>
  <verify>`npm run lint 2>&1 | grep -c "no-console"`</verify>
  <done>0 ошибок no-console</done>
</task>

<task type="auto">
  <name>Task 3: Удалить неиспользуемые переменные</name>
  <files>[]</files>
  <action>
Для каждого файла с ошибкой no-unused-vars:
1. Если переменная нужна — добавить префикс _ (например, _userId)
2. Если не нужна — удалить строку
3. Для catch (error) — использовать error instanceof Error
  </action>
  <verify>`npm run lint 2>&1 | grep -c "no-unused-vars\|no-explicit-any"`</verify>
  <done>0 ошибок unused-vars</done>
</task>

<task type="auto">
  <name>Task 4: Типизировать any типы</name>
  <files>[]</files>
  <action>
Для каждого файла с @typescript-eslint/no-explicit-any:
1. Определить правильный тип на основе контекста
2. Использовать unknown где тип неизвестен
3. Создать интерфейсы для API-ответов TMDB
  </action>
  <verify>`npm run lint 2>&1 | grep -c "@typescript-eslint/no-explicit-any"`</verify>
  <done>0 ошибок any типов</done>
</task>

<task type="auto">
  <name>Task 5: Исправить react-hooks проблемы</name>
  <files>[]</files>
  <action>
Для каждого файла с react-hooks/* ошибками:
1. Исправить exhaustive-deps: добавить/удалить зависимости
2. Избегать setState в useEffect: использовать useMemo или хелперы
3. Проверить правила хуков
  </action>
  <verify>`npm run lint 2>&1 | grep -c "react-hooks"`</verify>
  <done>0 ошибок react-hooks</done>
</task>

<task type="auto">
  <name>Task 6: Исправить @next/next проблемы</name>
  <files>[]</files>
  <action>
Для каждого файла с @next/next/* ошибками:
1. Заменить <img> на <Image /> из next/image
2. Исправить ссылки на страницы: использовать <Link> или useRouter
  </action>
  <verify>`npm run lint 2>&1 | grep -c "@next/next"`</verify>
  <done>0 ошибок @next/next</done>
</task>

<task type="auto">
  <name>Task 7: Финальная проверка</name>
  <files>[]</files>
  <action>
Запустить `npm run lint` и убедиться что:
- 0 errors
- Минимум warnings (допустимы minor)
  </action>
  <verify>`npm run lint`</verify>
  <done>npm run lint проходит чисто</done>
</task>

</tasks>

<verification>
`npm run lint` возвращает 0 errors
</verification>

<success_criteria>
- Все 629 errors исправлены
- Предупреждения сведены к минимуму
- Код соответствует стандартам из AGENTS.md
</success_criteria>

<output>
After completion, create `.planning/phases/03-lint-cleanup/{phase}-01-SUMMARY.md`
</output>
